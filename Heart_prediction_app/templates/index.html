<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Heart Failure Risk Prediction</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<style>
    body { background: #eef2f7; font-family: 'Segoe UI', sans-serif; }

    .card {
        max-width: 780px;
        margin: auto;
        border-radius: 14px;
        padding: 25px;
    }

    .info-badge {
        font-size: 11px;
        margin-left: 5px;
    }

    .footer {
        text-align: center;
        margin: 50px auto;
        color: #555;
    }

    .footer a {
        margin: 0 8px;
        color: #0d6efd;
        text-decoration: none;
        font-weight: 500;
    }

    .footer a:hover {
        text-decoration: underline;
    }

</style>
</head>

<body>

<div class="card shadow mt-4">
    <h3 class="text-center mb-2">‚ù§Ô∏è Heart Failure Risk Prediction</h3>
    <p class="text-muted text-center mb-4">Enter clinical values to evaluate heart failure risk</p>

    <form action="/" method="POST" autocomplete="off">

        <!-- Age -->
        <label class="form-label">Age (Years)</label>
        <input type="number" class="form-control" name="age"
               value="{{ age if age is defined else '' }}" placeholder="e.g., 60" required>

        <!-- CPK -->
        <label class="form-label mt-3">
            CPK - Creatinine Phosphokinase (mcg/L)
            <span class="badge bg-secondary info-badge">Higher = Muscle/Heart Damage</span>
        </label>
        <input type="number" class="form-control" name="creatinine_phosphokinase"
               value="{{ creatinine_phosphokinase if creatinine_phosphokinase is defined else '' }}"
               placeholder="Normal: 23 - 200" required>

        <!-- EF -->
        <label class="form-label mt-3">
            Ejection Fraction (%)
            <span class="badge bg-secondary info-badge">Lower = Weak Heart Pumping</span>
        </label>
        <input type="number" class="form-control" name="ejection_fraction"
               value="{{ ejection_fraction if ejection_fraction is defined else '' }}"
               placeholder="Normal: 55 - 70" required>

        <!-- Platelets -->
        <label class="form-label mt-3">Platelets (kiloplatelets/mL)</label>
        <input type="number" class="form-control" name="platelets"
               value="{{ platelets if platelets is defined else '' }}"
               placeholder="150,000 - 450,000" required>

        <!-- Serum Creatinine -->
        <label class="form-label mt-3">
            Serum Creatinine (mg/dL)
            <span class="badge bg-secondary info-badge">Higher = Poor Kidney Function</span>
        </label>
        <input type="number" step="0.01" class="form-control" name="serum_creatinine"
               value="{{ serum_creatinine if serum_creatinine is defined else '' }}"
               placeholder="0.7 - 1.3" required>

        <!-- Sodium -->
        <label class="form-label mt-3">Serum Sodium (mEq/L)</label>
        <input type="number" class="form-control" name="serum_sodium"
               value="{{ serum_sodium if serum_sodium is defined else '' }}"
               placeholder="135 - 145" required>

        <!-- Gender -->
        <label class="form-label mt-3">Gender</label>
        <select class="form-select" name="sex">
            <option value="1" {% if sex == '1' %}selected{% endif %}>Male</option>
            <option value="0" {% if sex == '0' %}selected{% endif %}>Female</option>
        </select>

        <!-- Time -->
        <label class="form-label mt-3">
            Follow-Up Time (Days)
            <span class="badge bg-secondary info-badge">Monitoring Duration</span>
        </label>
        <input type="number" class="form-control" name="time"
               value="{{ time if time is defined else '' }}"
               placeholder="e.g., 50" required>

        <button type="submit" class="btn btn-primary w-100 mt-4 py-2">
            üîç Predict
        </button>
    </form>

    {% if result %}
    <div class="alert alert-info mt-4 text-center fs-5">
        {{ result }}
    </div>
    {% endif %}
</div>

<!-- Info Section -->
<div class="card shadow p-4 mt-4">
    <h4 class="text-center">üìò Understanding the Clinical Attributes</h4>
    <ul class="list-group mt-3">
        <li class="list-group-item"><b>Age:</b> Older age increases heart risk.</li>
        <li class="list-group-item"><b>CPK:</b> High values indicate muscle/heart injury.</li>
        <li class="list-group-item"><b>Ejection Fraction:</b> Low EF means weak heart pumping.</li>
        <li class="list-group-item"><b>Platelets:</b> Imbalance may indicate disease.</li>
        <li class="list-group-item"><b>Serum Creatinine:</b> High = poor kidney function.</li>
        <li class="list-group-item"><b>Serum Sodium:</b> Imbalance stresses the heart.</li>
        <li class="list-group-item"><b>Sex:</b> Biological gender.</li>
        <li class="list-group-item"><b>Time:</b> Follow-up observation period.</li>
    </ul>
</div>

<div class="footer">
    <p>Project by <b>Eswar Potti</b></p>
    <a href="https://github.com/eswarpotti3" target="_blank">GitHub</a> |
    <a href="https://www.linkedin.com/in/eswar-potti/" target="_blank">LinkedIn</a> |
    <a href="mailto:potti.eswar3@gmail.com" target="_blank">Gmail</a>
    <p class="text-muted mt-2">Heart Failure Prediction ‚Ä¢ Extra Trees Classifier + SMOTE</p>
</div>
<script>
    // Detect hard reload
    const navEntry = performance.getEntriesByType("navigation")[0];

    // If page was reloaded ‚Üí clear fields
    if (navEntry && navEntry.type === "reload") {

        // Force-clear each input manually
        document.querySelectorAll("input, select").forEach(el => {
            el.value = "";
        });
    }
</script>   


</body>
</html>
